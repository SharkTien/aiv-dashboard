\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[vietnamese]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{titlesec}

\geometry{margin=2.5cm}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{BÃ¡o cÃ¡o thá»±c táº­p}
\fancyhead[R]{AIESEC Dashboard CI/CD}
\fancyfoot[C]{\thepage}

% Cáº¥u hÃ¬nh cho code blocks
\lstset{
    language=bash,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    numbers=left,
    numberstyle=\tiny,
    stepnumber=1,
    numbersep=5pt,
    backgroundcolor=\color{gray!10},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    frame=single,
    tabsize=2,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false,
    escapeinside={\%*}{*)}
}

\title{\textbf{CHÆ¯Æ NG 4: TRIá»‚N KHAI Há»† THá»NG CI/CD}}
\author{}
\date{}

\begin{document}

\maketitle

\section{Tá»•ng quan vá» CI/CD}

Continuous Integration/Continuous Deployment (CI/CD) lÃ  má»™t phÆ°Æ¡ng phÃ¡p phÃ¡t triá»ƒn pháº§n má»m hiá»‡n Ä‘áº¡i, cho phÃ©p tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh tÃ­ch há»£p, kiá»ƒm thá»­ vÃ  triá»ƒn khai á»©ng dá»¥ng. Trong dá»± Ã¡n AIESEC Dashboard, tÃ´i Ä‘Ã£ triá»ƒn khai má»™t há»‡ thá»‘ng CI/CD sá»­ dá»¥ng GitHub Webhook Ä‘á»ƒ tá»± Ä‘á»™ng deploy á»©ng dá»¥ng má»—i khi cÃ³ thay Ä‘á»•i code.

\subsection{Äá»‹nh nghÄ©a vÃ  má»¥c tiÃªu}

CI/CD bao gá»“m hai khÃ¡i niá»‡m chÃ­nh:
\begin{itemize}
    \item \textbf{Continuous Integration (CI)}: TÃ­ch há»£p liÃªn tá»¥c code tá»« nhiá»u developer vÃ o má»™t repository chung
    \item \textbf{Continuous Deployment (CD)}: Triá»ƒn khai liÃªn tá»¥c code Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p vÃ o mÃ´i trÆ°á»ng production
\end{itemize}

Má»¥c tiÃªu chÃ­nh cá»§a viá»‡c triá»ƒn khai CI/CD:
\begin{itemize}
    \item Tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh deploy
    \item Giáº£m thiá»ƒu lá»—i human error
    \item TÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn vÃ  triá»ƒn khai
    \item Äáº£m báº£o tÃ­nh á»•n Ä‘á»‹nh cá»§a há»‡ thá»‘ng
\end{itemize}

\section{Kiáº¿n trÃºc há»‡ thá»‘ng CI/CD}

\subsection{MÃ´ hÃ¬nh hoáº¡t Ä‘á»™ng}

Há»‡ thá»‘ng CI/CD Ä‘Æ°á»£c thiáº¿t káº¿ theo mÃ´ hÃ¬nh Ä‘Æ¡n giáº£n nhÆ°ng hiá»‡u quáº£:

\begin{center}
\texttt{Developer â†’ GitHub Repository â†’ Webhook Server â†’ Production Server}
\end{center}

\subsubsection{Quy trÃ¬nh hoáº¡t Ä‘á»™ng chi tiáº¿t}

\begin{enumerate}
    \item \textbf{Development Phase}: Developer thá»±c hiá»‡n commit vÃ  push code lÃªn GitHub repository
    \item \textbf{Webhook Trigger}: GitHub tá»± Ä‘á»™ng gá»­i POST request Ä‘áº¿n webhook server
    \item \textbf{Webhook Processing}: Webhook server nháº­n request vÃ  validate
    \item \textbf{Deployment Execution}: Script deploy Ä‘Æ°á»£c thá»±c thi tá»± Ä‘á»™ng
    \item \textbf{Application Restart}: PM2 restart á»©ng dá»¥ng vá»›i version má»›i
\end{enumerate}

\subsection{CÃ¡c thÃ nh pháº§n chÃ­nh}

\subsubsection{GitHub Webhook}
\begin{itemize}
    \item \textbf{URL}: \texttt{https://aiv-dashboard-ten.vercel.app/hooks/aiv-dashboard-deploy}
    \item \textbf{Event}: Push to main branch
    \item \textbf{Content-Type}: application/json
    \item \textbf{Security}: IP whitelist cho GitHub servers
\end{itemize}

\subsubsection{Webhook Service}
\begin{itemize}
    \item \textbf{Port}: 9000
    \item \textbf{Configuration}: \texttt{/etc/webhook/hooks.json}
    \item \textbf{Service Management}: systemd service
    \item \textbf{Auto-restart}: Enabled vá»›i restart policy
\end{itemize}

\subsubsection{Deployment Script}
\begin{itemize}
    \item \textbf{Path}: \texttt{/root/apps/aiv-dashboard/deploy.sh}
    \item \textbf{Functionality}: Pull code, install dependencies, build, restart
    \item \textbf{Working Directory}: \texttt{/root/apps/aiv-dashboard}
\end{itemize}

\section{Triá»ƒn khai vÃ  cáº¥u hÃ¬nh}

\subsection{CÃ i Ä‘áº·t Webhook Service}

\begin{lstlisting}[caption=CÃ i Ä‘áº·t webhook package]
# CÃ i Ä‘áº·t webhook package
sudo apt update
sudo apt install webhook

# Táº¡o thÆ° má»¥c cáº¥u hÃ¬nh
sudo mkdir -p /etc/webhook
\end{lstlisting}

\subsection{Cáº¥u hÃ¬nh Webhook}

File cáº¥u hÃ¬nh \texttt{/etc/webhook/hooks.json}:

\begin{lstlisting}[caption=Cáº¥u hÃ¬nh webhook hooks.json, language=json]
[
  {
    "id": "aiv-dashboard-deploy",
    "execute-command": "/root/apps/aiv-dashboard/deploy.sh",
    "command-working-directory": "/root/apps/aiv-dashboard",
    "response-message": "Deployment started successfully!"
  }
]
\end{lstlisting}

\subsection{Script Deployment}

Script \texttt{/root/apps/aiv-dashboard/deploy.sh}:

\begin{lstlisting}[caption=Script deployment tá»± Ä‘á»™ng]
#!/bin/bash

echo "ğŸš€ Starting deployment at $(date)"

# Pull latest code
echo "ğŸ“¥ Pulling latest code..."
git pull origin main

# Install dependencies
echo "ğŸ“¦ Installing dependencies..."
npm ci

# Build application
echo "ğŸ”¨ Building application..."
npm run build

# Restart PM2
echo "ğŸ”„ Restarting application..."
pm2 restart aiv-dashboard

# Check status
echo "âœ… Checking status..."
pm2 status

echo "ğŸ‰ Deployment completed at $(date)"
\end{lstlisting}

\subsection{Systemd Service Configuration}

File \texttt{/etc/systemd/system/webhook.service}:

\begin{lstlisting}[caption=Cáº¥u hÃ¬nh systemd service]
[Unit]
Description=Webhook Service for Auto Deploy
After=network.target
Wants=network.target

[Service]
Type=simple
User=root
Group=root
ExecStart=/usr/bin/webhook -hooks /etc/webhook/hooks.json -verbose -port 9000
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
\end{lstlisting}

\section{Káº¿t quáº£ triá»ƒn khai}

\subsection{Lá»£i Ã­ch Ä‘áº¡t Ä‘Æ°á»£c}

\subsubsection{Tá»± Ä‘á»™ng hÃ³a hoÃ n toÃ n}
\begin{itemize}
    \item Loáº¡i bá» viá»‡c deploy thá»§ cÃ´ng
    \item Giáº£m thiá»ƒu lá»—i human error
    \item TÄƒng tá»‘c Ä‘á»™ triá»ƒn khai
\end{itemize}

\subsubsection{TÃ­nh kháº£ dá»¥ng cao}
\begin{itemize}
    \item Auto-restart khi service crash
    \item Monitoring vÃ  logging Ä‘áº§y Ä‘á»§
    \item Rollback nhanh chÃ³ng khi cáº§n
\end{itemize}

\subsubsection{Báº£o máº­t}
\begin{itemize}
    \item Chá»‰ deploy tá»« GitHub repository Ä‘Æ°á»£c á»§y quyá»n
    \item IP whitelist cho GitHub servers
    \item Audit trail Ä‘áº§y Ä‘á»§
\end{itemize}

\subsection{Metrics vÃ  hiá»‡u suáº¥t}

\subsubsection{Thá»i gian deploy}
\begin{itemize}
    \item \textbf{TrÆ°á»›c khi triá»ƒn khai CI/CD}: 5-10 phÃºt (thá»§ cÃ´ng)
    \item \textbf{Sau khi triá»ƒn khai}: 30-60 giÃ¢y (tá»± Ä‘á»™ng)
\end{itemize}

\subsubsection{Táº§n suáº¥t deploy}
\begin{itemize}
    \item TÄƒng tá»« 1-2 láº§n/tuáº§n lÃªn 5-10 láº§n/tuáº§n
    \item Kháº£ nÄƒng deploy hotfix ngay láº­p tá»©c
\end{itemize}

\subsubsection{Uptime}
\begin{itemize}
    \item 99.9\% uptime nhá» auto-restart
    \item Zero-downtime deployment
\end{itemize}

\section{Monitoring vÃ  Troubleshooting}

\subsection{Logging System}

\begin{lstlisting}[caption=CÃ¡c lá»‡nh monitoring]
# Webhook logs
sudo journalctl -u webhook -f

# Application logs
pm2 logs aiv-dashboard

# System status
pm2 status
sudo systemctl status webhook
\end{lstlisting}

\subsection{Health Checks}

\begin{lstlisting}[caption=CÃ¡c lá»‡nh health check]
# Check webhook endpoint
curl http://localhost:9000/hooks/aiv-dashboard-deploy

# Check application health
curl http://localhost:3000/api/health

# Check system resources
htop
df -h
\end{lstlisting}

\section{Káº¿t luáº­n}

Viá»‡c triá»ƒn khai há»‡ thá»‘ng CI/CD Ä‘Ã£ mang láº¡i nhá»¯ng lá»£i Ã­ch Ä‘Ã¡ng ká»ƒ:

\begin{enumerate}
    \item \textbf{TÄƒng hiá»‡u quáº£ phÃ¡t triá»ƒn}: Developer cÃ³ thá»ƒ focus vÃ o coding thay vÃ¬ deploy
    \item \textbf{Giáº£m thiá»ƒu rá»§i ro}: Tá»± Ä‘á»™ng hÃ³a giáº£m lá»—i human error
    \item \textbf{TÄƒng tÃ­nh á»•n Ä‘á»‹nh}: Auto-restart vÃ  monitoring Ä‘áº£m báº£o service luÃ´n available
    \item \textbf{Cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng}: Deploy nhanh hÆ¡n, Ã­t downtime
\end{enumerate}

Há»‡ thá»‘ng CI/CD nÃ y Ä‘Ã£ chá»©ng minh tÃ­nh hiá»‡u quáº£ trong viá»‡c quáº£n lÃ½ vÃ  triá»ƒn khai á»©ng dá»¥ng AIESEC Dashboard, táº¡o ná»n táº£ng vá»¯ng cháº¯c cho viá»‡c phÃ¡t triá»ƒn vÃ  má»Ÿ rá»™ng há»‡ thá»‘ng trong tÆ°Æ¡ng lai.

\subsection{Khuyáº¿n nghá»‹ phÃ¡t triá»ƒn}

Äá»ƒ cáº£i thiá»‡n thÃªm há»‡ thá»‘ng CI/CD trong tÆ°Æ¡ng lai:

\begin{itemize}
    \item Triá»ƒn khai automated testing trÆ°á»›c khi deploy
    \item ThÃªm notification system (Slack, Email) khi deploy
    \item Implement blue-green deployment Ä‘á»ƒ giáº£m downtime
    \item ThÃªm database migration automation
    \item Setup monitoring vÃ  alerting system
\end{itemize}

\end{document}
